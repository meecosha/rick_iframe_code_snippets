<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Code</title>
  <style>
    :root{
      --page-bg: transparent; /* inherit from parent page */
      --code-bg:#0f172a;
      --code-text:#e5e7eb;
      --btn-bg:rgba(255,255,255,0.9);
      --btn-hover:rgba(255,255,255,1);
      --btn-text:#0b1220;
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }

    html,body{margin:0;padding:0;background:var(--page-bg);color:var(--code-text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    .wrap{padding:0;margin:0;}
    
    /* Code container with floating button */
    .code-surface{
      position:relative;
      background:var(--code-bg);
      color:var(--code-text);
      border-radius:8px;
      overflow:visible;
    }
    pre{
      margin:0;
      padding:16px 18px;
      font-family:var(--mono);
      font-size:13px;
      line-height:1.5;
      white-space:pre;
      tab-size:2;
      -moz-tab-size:2;
    }
    /* Floating copy button */
    #copy-btn{
      position:absolute;
      top:8px;
      right:8px;
      appearance:none;
      border:none;
      background:var(--btn-bg);
      color:var(--btn-text);
      font-size:12px;
      font-weight:600;
      border-radius:6px;
      padding:4px 8px;
      cursor:pointer;
      transition:background .15s ease;
    }
    #copy-btn:hover{background:var(--btn-hover);}
    /* Status text (small, bottom-right inside code) */
    #status{
      position:absolute;
      bottom:6px;
      right:10px;
      font-size:11px;
      color:#93e1ab;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="code-surface">
      <button id="copy-btn" type="button" title="Copy code to clipboard">Copy</button>
      <pre id="code-pre"><code id="code-block"></code></pre>
      <span id="status" aria-live="polite"></span>
    </div>
  </div>

  <!-- Code content -->
  <textarea id="snippet" style="display:none;">
POST /transactions/examplecompany/create
Host: exchange.rick.ai
Content-Type: application/json

{
  "transaction_id": "23d",
  "user_id": "8070",
  "ga_client_id": "1599344136.1453219348",
  "ym_client_id": "1693556325685376429",
  "deal_created_at": 1457452914,
  "status": "paid",
  "data_source": "website1.ru",
  "revenue": 300,
  "grossprofit": 30,
  "items": [
    {
      "name": "Home cleaning",
      "sku": "32354",
      "price": "200",
      "quantity": 1,
      "category": "Cleaning"
    },
    {
      "name": "Kitchen cleaning",
      "sku": "32354",
      "price": "100",
      "quantity": 1,
      "category": "Cleaning"
    }
  ],
  "contact": {
    "phone_number": "+79871234567",
    "phone_number_hash": "094c9957c54235232dde8a1064fd261be2af0fa7",
    "email": "example@gmail.com",
    "email_hash": "5d59f22ef88d9b6351d529e5c2c23156fdf3ba45"
  }
}
  </textarea>

  <script>
    const qs = (s, el=document) => el.querySelector(s);
    const codeBlock = qs("#code-block");
    const statusEl  = qs("#status");
    const copyBtn   = qs("#copy-btn");

    // Load code
    const raw = qs("#snippet").value.replace(/^\n/, "");
    codeBlock.textContent = raw;

    // Copy handler
    copyBtn.addEventListener("click", async () => {
      const text = codeBlock.textContent;
      try {
        await navigator.clipboard.writeText(text);
        statusEl.textContent = "Copied!";
        setTimeout(() => (statusEl.textContent = ""), 1600);
        return;
      } catch (_) {}
      try {
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.setAttribute("readonly", "");
        ta.style.position = "fixed";
        ta.style.opacity = "0";
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        statusEl.textContent = "Copied!";
        setTimeout(() => (statusEl.textContent = ""), 1600);
      } catch (e) {
        statusEl.textContent = "Copy failed";
        setTimeout(() => (statusEl.textContent = ""), 2000);
      }
    });

    // Auto-resize for iframe embed
    const postHeight = () => {
      const h = document.body.scrollHeight;
      parent.postMessage({ type: "snippet:height", height: h }, "*");
    };
    window.addEventListener("load", postHeight);
    new ResizeObserver(postHeight).observe(document.body);
  </script>
</body>
</html>
